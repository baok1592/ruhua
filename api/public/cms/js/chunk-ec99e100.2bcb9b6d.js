(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec99e100"],{"3a29":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"addcoupon"},[e("el-container",[e("el-aside",{attrs:{width:"200px"}},[e("NavTo")],1),e("el-container",[e("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[e("Header")],1),e("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[e("el-main",[e("div",{staticClass:"add"},[e("div",{staticClass:"add_btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.jumpback}},[t._v("返回")])],1),e("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:t.form,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"优惠券名称"}},[e("el-input",{staticStyle:{width:"500px"},attrs:{"hide-required-asterisk":""},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"发放总量"}},[e("el-input",{staticStyle:{width:"200px"},model:{value:t.form.stock,callback:function(a){t.$set(t.form,"stock",a)},expression:"form.stock"}}),e("div",{staticClass:"dan"},[t._v("张")])],1),e("div",{staticClass:"ts"},[t._v("修改优惠券总量时只能增加不能减少，请谨慎设置")]),e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"适用商品"}},[e("el-radio-group",{staticStyle:{"padding-top":"14px"},on:{change:t.get_value},model:{value:t.is_all,callback:function(a){t.is_all=a},expression:"is_all"}},[e("el-radio",{attrs:{label:0}},[t._v("全部商品可用")]),e("el-radio",{attrs:{label:1}},[t._v("指定商品可用")])],1)],1)],1),e("el-col",{attrs:{span:6}},[1==t.is_all?e("div",{staticClass:"xzsp",on:{click:function(a){t.dialogVisibleadd=!0}}},[t._v("选择商品")]):t._e()])],1),1==t.is_all?e("div",{staticClass:"spxz"},[e("el-collapse",{on:{change:t.handleChange},model:{value:t.activeNames,callback:function(a){t.activeNames=a},expression:"activeNames"}},[e("el-collapse-item",{attrs:{title:"已选择商品",name:"1"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.canjia_list,"row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{prop:"",label:"所有商品",width:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"shiyong"},[e("div",{staticClass:"sy_01"},[e("img",{attrs:{src:t.$getimg+t.tableData[a.row].imgs}})]),e("div",{staticClass:"sy_02"},[e("div",{staticClass:"sy_02_1"},[t._v(t._s(t.tableData[a.row].goods_name)+"--"+t._s(a.row))]),e("div",{staticClass:"sy_02_2"},[t._v("¥"+t._s(t.tableData[a.row].price)+" 库存："+t._s(t.tableData[a.row].stock))])])])]}}],null,!1,4120104498)}),e("el-table-column",{attrs:{prop:"operation",label:"操作",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(e){return t.del(a.row)}},slot:"reference"},[t._v("移除")])]}}],null,!1,3887698413)})],1)],1)],1)],1):t._e(),e("el-form-item",{attrs:{label:"使用门槛",prop:"resource"}},[e("el-radio-group",{on:{change:t.is_menkan},model:{value:t.menkan,callback:function(a){t.menkan=a},expression:"menkan"}},[e("el-radio",{attrs:{label:0}},[t._v("无门槛")]),e("el-radio",{attrs:{label:2}},[t._v("订单满 \n\t\t\t\t\t\t\t\t\t\t"),1==t.show_ininput?e("el-input",{staticStyle:{width:"100px"},model:{value:t.form.full,callback:function(a){t.$set(t.form,"full",a)},expression:"form.full"}}):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t 元\n\t\t\t\t\t\t\t\t\t")],1)],1)],1),e("el-form-item",{attrs:{label:"优惠价格"}},[e("div",{staticClass:"jian"},[t._v("减免")]),e("el-input",{staticStyle:{width:"100px"},model:{value:t.form.reduce,callback:function(a){t.$set(t.form,"reduce",a)},expression:"form.reduce"}}),e("div",{staticClass:"dan"},[t._v("元")])],1),e("el-form-item",{attrs:{label:"用券时间"}},[e("el-radio-group",{staticStyle:{"text-align":"left"},model:{value:t.form.time,callback:function(a){t.$set(t.form,"time",a)},expression:"form.time"}},[e("el-radio",{attrs:{label:""}},[e("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.start_time,callback:function(a){t.$set(t.form,"start_time",a)},expression:"form.start_time"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t - \n\t\t\t\t\t\t\t\t\t\t"),e("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.end_time,callback:function(a){t.$set(t.form,"end_time",a)},expression:"form.end_time"}})],1),e("br"),e("div",{staticStyle:{height:"23px"}}),e("el-radio",{attrs:{label:"1"}},[t._v("领券当日起 "),e("el-input",{staticStyle:{width:"100px"},model:{value:t.form.day,callback:function(a){t.$set(t.form,"day",a)},expression:"form.day"}}),t._v(" 天内可用")],1)],1)],1),e("el-form-item",{attrs:{label:"使用次数",prop:"resource"}},[e("el-radio-group",{staticStyle:{"margin-top":"15px"},model:{value:t.form.status,callback:function(a){t.$set(t.form,"status",a)},expression:"form.status"}},[e("el-radio",{attrs:{label:"1"}},[t._v("有限")]),e("el-radio",{attrs:{label:"2"}},[t._v("无限")])],1)],1)],1),e("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.jumpback}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)])],1)],1)],1),e("el-dialog",{staticStyle:{width:"60vw",height:"90vh",margin:"10vh 0 0 20vw"},attrs:{title:"","lock-scroll":!0,top:0,"destroy-on-close":!0,visible:t.dialogVisibleadd,width:"100%"},on:{"update:visible":function(a){t.dialogVisibleadd=a}}},[e("span",[e("div",{staticStyle:{"text-align":"left"}},[e("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:t.alls},slot:"reference"},[t._v("全选")])],1)]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{prop:"goods_name",label:"商品"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"pro"},[e("div",{staticClass:"pro_02"},[e("img",{attrs:{src:t.$getimg+a.row.imgs}})]),e("div",{staticClass:"pro_03"},[e("div",{staticClass:"pro_03_1"},[t._v(t._s(a.row.goods_name))]),e("div",{staticClass:"pro_03_2"},[t._v("¥"+t._s(a.row.price))])])])]}}])}),e("el-table-column",{attrs:{prop:"sales",label:"近30天销量/累计销量",width:"180"}}),e("el-table-column",{attrs:{prop:"stock",label:"库存",width:"80"}}),e("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.is_canjia?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.canjia(a.$index)}}},[t._v("选择")]):t._e(),1==a.row.is_canjia?e("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){return t.cancel(a.$index)}}},[t._v("取消")]):t._e()]}}])})],1),e("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"danger"},on:{click:function(a){t.dialogVisibleadd=!1}}},[t._v("关闭")])],1)],1)],1)},i=[],l=(e("7893"),e("a49b"),e("15fc")),o=e("71c2"),n={data:function(){return{show_ininput:0,menkan:"",canjia_list:[],is_all:"",top:"0",activeNames:["1"],tableRowClassName:"",tableData:[],dialogVisibleadd:!1,form:{goods_ids:[],stock:"",name:"",full:"",reduce:"",start_time:"",end_time:"",time:"",day:"",status:"",stock_type:""}}},components:{Header:o["a"],NavTo:l["a"]},methods:{is_menkan:function(t){console.log(t),2==t?this.show_ininput=1:(this.form.full=0,this.show_ininput=0)},handleChange:function(t){console.log(t)},get_value:function(t){console.log(t);var a=[];0==t&&a.push(t),this.form.goods_ids=a},alls:function(){for(var t in this.tableData){var a=this.tableData[t];this.canjia_list.push(t),a.is_canjia=1}},canjia:function(t){this.tableData[t].is_canjia=1,this.canjia_list.push(t),console.log(this.canjia_list)},cancel:function(t){this.tableData[t].is_canjia=0;for(var a=0;a<this.canjia_list.length;a++)t==this.canjia_list[a]&&this.canjia_list.splice(a,1);console.log(this.canjia_list)},del:function(t){for(var a=0;a<this.canjia_list.length;a++)t==this.canjia_list[a]&&(this.canjia_list.splice(a,1),this.tableData[t].is_canjia=0);console.log(this.canjia_list)},get_pro:function(){var t=this;this.http.post("product/admin/get_product").then((function(a){for(var e in a.data){var s=a.data[e];s.is_canjia=0}t.tableData=a.data}))},onSubmit:function(){var t=this;for(var a in this.canjia_list){var e=this.canjia_list[a];this.form.goods_ids.push(this.tableData[e].goods_id)}console.log(this.form),this.form.time&&""==this.form.day?this.$message({type:"warning",message:"未填写天数!"}):this.form.time||""!=this.form.start_time&&""!=this.form.end_time?this.http.post_show("coupon/admin/add_coupon",this.form).then((function(){t.$message({type:"success",message:"添加成功!"}),t.form={},t.dialogVisibleadd=!1,t.$router.push({path:"/coupon"})})):this.$message({type:"warning",message:"未填写起止日期"})},jumpback:function(){this.$router.push({path:"/coupon"})}},mounted:function(){this.get_pro()}},r=n,c=(e("b679"),e("4e82")),d=Object(c["a"])(r,s,i,!1,null,null,null);a["default"]=d.exports},b679:function(t,a,e){"use strict";var s=e("c78f"),i=e.n(s);i.a},c78f:function(t,a,e){}}]);