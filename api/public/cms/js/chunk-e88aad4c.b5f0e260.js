(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e88aad4c"],{"5dc6":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"about"},[e("el-drawer",{attrs:{title:"视频管理(视频上传（10M）以内：)",visible:t.drawer,direction:"rtl",size:"35%","before-close":t.close_box},on:{"update:visible":function(i){t.drawer=i}}},[e("span",[e("div",{staticClass:"rltan"},[e("div",{staticClass:"btn"},[e("a",{attrs:{href:"https://alibabawood.aliyun.com/web/Home",target:"_blank"}},[e("el-button",[t._v("在线制作视频")])],1)]),t.show?e("video",{attrs:{controls:"controls",width:"300",height:"200",autoplay:"autoplay"}},[e("source",{attrs:{src:t.play_url,type:"video/mp4"}})]):t._e(),e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"con"},[e("el-row",[e("el-input",{staticStyle:{width:"30%","margin-right":"10px"},attrs:{placeholder:"请输入视频描述"},model:{value:t.des,callback:function(i){t.des=i},expression:"des"}}),e("input",{ref:"inputer",attrs:{type:"file",id:"fileExport"},on:{change:t.upload}}),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleFileChange}},[t._v("确定上传")])],1),e("el-dialog",{attrs:{visible:t.dialogVisiblea},on:{"update:visible":function(i){t.dialogVisiblea=i}}}),e("div",{staticStyle:{height:"25px"}}),e("el-row",{attrs:{gutter:18}},[0==t.cate_id?t._l(t.img_list,(function(i,s){return e("el-col",{key:s,attrs:{span:6}},[e("div",{class:t.tab_css(s),staticStyle:{"word-wrap":"normal","word-break":"break-all",padding:"5px","text-align":"center","line-height":"30px",overflow:"hidden"},on:{click:function(i){return t.choose_img(s)}}},[[i.description?[t._v(t._s(i.description))]:[t._v(t._s(i.url))]]],2),t.play_index!=s?e("el-button",{staticStyle:{"margin-left":"25%"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.play(i.url,s)}}},[t._v("播放")]):e("el-button",{staticStyle:{"margin-left":"25%"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.cancel_play(s)}}},[t._v("取消")])],1)})):t._l(t.imgB,(function(i,s){return e("el-col",{key:s,staticClass:"abox",attrs:{span:6}},[e("div",{class:t.tab_css(s)},[e("img",{staticClass:"img",attrs:{src:t.getimg+i.url},on:{click:function(i){return t.choose_img(s)}}})])])}))],2),e("div",{staticStyle:{height:"300px"}})],1),e("div",{staticClass:"footbtn"},[e("el-button",{on:{click:t.close_box}},[t._v("取消")]),e("el-button",{attrs:{type:"warning"},on:{click:t.del_img}},[t._v("删除")]),e("el-button",{attrs:{type:"primary"},on:{click:t.add_img}},[t._v("确定")])],1)])])]),e("el-dialog",{attrs:{title:"添加视频分类",visible:t.dialogVisibleadd,width:"30%"},on:{"update:visible":function(i){t.dialogVisibleadd=i}}},[e("el-form",{ref:"cate_form",attrs:{model:t.cate_form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"分类名称"}},[e("el-input",{model:{value:t.cate_form.category_name,callback:function(i){t.$set(t.cate_form,"category_name",i)},expression:"cate_form.category_name"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.dialogVisibleadd=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},a=[],n=(e("7cfd"),e("a49b")),o={data:function(){return{up_video:"",des:"",show:!1,play_url:"",fullscreenLoading:!1,activeName:"first",form:{name:"",banner_imgs:""},play_index:-1,dialogVisibleadd:!1,dialogVisiblea:!1,getimg:this.$getimg,cate_id:"0",cate_form:{category_name:""},img_category:"",img_list:[],checkList:[],add_img_list:[],upfile_url:n["a"]+"video/admin/add_video",upfile_head:{token:localStorage.getItem("token")},upfile_list:[],upfile_list_sku:[],upfile_banner_list:[]}},props:{drawer:"",length:"",ishead:"",father_fun:Function,iscg:""},components:{},created:function(){this._load(),this.checkList=[]},methods:{_load:function(){var t=this;this.http.get("video/admin/get_all_video").then((function(i){for(var e in i.data)i.data[e].is_play=0;t.img_list=i.data}))},play:function(t,i){var e=this;this.play_index=i,this.show=!1,this.play_url="",setTimeout((function(){e.show=!0,e.play_url=n["a"]+t}),100),console.log(this.play_url),console.log(this.show)},cancel_play:function(t){this.play_index==t&&(this.show=!1,this.play_index=-1)},handleFileChange:function(){var t=this,i=this.$refs.inputer,e=i.files[0],s=Math.floor(e.size/1024);console.log(s/1024);var a=new FormData;a.append("file",e),a.append("description",this.des),console.log(e),s/1024>10?this.$message.error("上传文件大小不能超过10M"):this.http.file_post("video/admin/add_video",a).then((function(i){t.fullscreenLoading=!1,t.$message({message:i.msg,type:"success"}),t.des="",t._load()}))},upload:function(){},onSubmit:function(){var t=this;this.http.post_show("img_category/admin/add_category",this.cate_form).then((function(i){t.$message({message:"添加成功",type:"success"}),t.dialogVisibleadd=!1,t._load()}))},change_del:function(){this.checkList=[],this.show_choose="",this.length=this.img_list.length},add_img:function(){console.log("start:",this.checkList,this.img_list,this.add_img_list);var t=this;for(var i in this.checkList){var e=this.checkList[i];for(var s in this.img_list)e==s&&t.add_img_list.push({id:this.img_list[s].id,url:this.img_list[s].url,description:this.img_list[s].description})}if(this.add_img_list.length<=this.length){var a=this.add_img_list;this.add_img_list=[],this.checkList=[],this.father_fun(a),this.drawer=!1}else this.$message({message:"最多选择"+this.length+"个视频",type:"warning"})},tab_css:function(t){return this.checkList.indexOf(t)>-1?"pic1":"pic"},choose_img:function(t){console.log("choose_img",t,this.length);var i=this;if(i.checkList.indexOf(t)>-1){var e=i.checkList.indexOf(t);i.checkList.splice(e,1)}else{if(!(i.checkList.length<i.length))return void this.$message({message:"最多选择"+this.length+"个视频",type:"warning"});i.checkList.push(t)}},del_img:function(){var t=this,i=[];for(var e in this.checkList){var s=this.checkList[e];for(var a in this.img_list)s==a&&i.push(this.img_list[a].id)}this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.http.post_show("video/admin/edit_video",{ids:i}).then((function(i){t.$message({type:"success",message:i.msg}),t.checkList=[],t._load()}))}))},upimg_back_fun:function(t){this.$message({type:"success",message:"上传成功"}),console.log(t),console.log(this.upfile_banner_list),this._load()},category_nav:function(t){this.cate_id=t.name;var i=[];for(var e in this.img_list){var s=this.img_list[e];s.category_id==t.name&&i.push(s)}this.imgB=i},close_box:function(){console.log("xxx"),this.add_img_list=[],this.checkList=[],this.add_img()}}},l=o,c=(e("6f7f"),e("4e82")),r=Object(c["a"])(l,s,a,!1,null,null,null);i["default"]=r.exports},"6f7f":function(t,i,e){"use strict";var s=e("da3a"),a=e.n(s);a.a},"7cfd":function(t,i,e){var s=e("d3d8").f,a=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in a||e("f9a5")&&s(a,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},da3a:function(t,i,e){}}]);