(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-048cd26c"],{6423:function(t,e,n){"use strict";var o=n("b4ef"),i=n.n(o);i.a},b4ef:function(t,e,n){},d733:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discount"},[n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("NavTo")],1),n("el-container",[n("el-header",{staticStyle:{"border-bottom":"1px solid #d0d0d0","background-color":"#FFFFFF"}},[n("Header")],1),n("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[n("el-main",[n("div",{staticClass:"article"},[n("el-button",{attrs:{type:"primary"},on:{click:t.add_user}},[t._v("添加折扣")]),n("div",{staticStyle:{height:"20px"}},[t._v(" ")]),[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),n("el-table-column",{attrs:{prop:"name",label:"活动名称"}}),n("el-table-column",{attrs:{prop:"content",label:"有效时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.start_time)+"至"+t._s(e.row.end_time)+"\n\t\t\t\t\t\t\t\t\t")]}}])}),n("el-table-column",{attrs:{prop:"label",label:"活动标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"danger",effect:"dark"}},[t._v(t._s(e.row.label))])]}}])}),n("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){return t.edit(e.row)}}},[t._v("修改")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(n){return t.del(e.row.id)}},slot:"reference"},[t._v("删除")])]}}])}),n("strong")],1)]],2),n("el-pagination",{staticStyle:{"margin-top":"50px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}})],1)],1)],1)],1)],1)},i=[],a=(n("7893"),n("a49b")),s=n("15fc"),l=n("71c2"),r={data:function(){return{dialogImageUrl:"",dialogVisiblea:!1,tab_nav:!1,dialogVisible:!1,dialogVisibleadd:!1,dialogFormVisible:!1,oid:0,form:{id:"",goods_name:"",content:"",img_id:[],stock:"",points:""},form_pro:{goods_name:"",content:"",img_id:[],stock:"",points:""},formLabelWidth:"120px",list:[],all:"",size:10,total:"",options:[],value:"",typeList:[],upfile_banner_list:[],upfile_url:a["a"]+"com/up_img?back=id",upfile_head:{token:localStorage.getItem("token")},upfile_list:[]}},components:{Header:l["a"],NavTo:s["a"]},mounted:function(){this._load()},methods:{_load:function(){var t=this;this.http.get("discount/admin/get_discount").then((function(e){t.list=e.data,t.total=t.list.length}))},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},onSubmit:function(){var t=this;this.http.post_show("admin/add_goods",this.form_pro).then((function(){t.$message({type:"success",message:"添加成功!"}),t.form={},t.upfile_banner_list=[],t.form_pro={goods_name:"",content:"",img_id:[],stock:"",points:""},t.dialogVisibleadd=!1,t.getCompany()}))},res_banner_imgs:function(t){console.log("res:",t),this.form_pro.img_id.push(t),console.log("xx:",this.form_pro.img_id)},add_user:function(){this.$router.push({path:"/extend/adddiscount"})},edit:function(t){localStorage.setItem("edit_data",JSON.stringify(t)),this.$router.push({path:"/extend/editdiscount"})},sub_edit:function(){var t=this;this.$confirm("确定修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.http.post_show("admin/edit_goods",t.form).then((function(){t.$message({type:"success",message:"修改成功!"}),t.dialogVisible=!1,t.clear_data(),t.getCompany()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})})),this.http.post_show("admin/edit_goods",this.form).then((function(){t.clear_data(),t.getCompany()}))},jump_page:function(t){var e=this,n=(t-1)*e.size,o=t*e.size;console.log(n,o),this.list=this.all.slice(n,o)},sub:function(){},getCompany:function(){},del:function(t){var e=this,n=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.put_show("discount/admin/del_discount",{id:t}).then((function(){n.$message({showClose:!0,message:"删除成功",type:"success"}),e._load()}))}))},close_fun:function(t){this.clear_data(),t()},clear_data:function(){this.dialogFormVisible=!1}}},c=r,d=(n("6423"),n("4e82")),u=Object(d["a"])(c,o,i,!1,null,null,null);e["default"]=u.exports}}]);