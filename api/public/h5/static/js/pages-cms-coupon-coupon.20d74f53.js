(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cms-coupon-coupon"],{"1bb8":function(t,i,o){"use strict";o.r(i);var e=o("2144"),a=o.n(e);for(var n in e)"default"!==n&&function(t){o.d(i,t,function(){return e[t]})}(n);i["default"]=a.a},2144:function(t,i,o){"use strict";var e=o("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=e(o("bd86")),n=e(o("fcf3")),s=e(o("3b51")),d=e(o("53ad")),u=(o("eebf"),{data:function(){var t=this.getDate({format:!0}),i=this.getDate_end({format:!0});return{status:[{value:"0",name:"一次"},{value:"1",name:"无限制"}],current:0,coupon_form:{status:"",full:"",reduce:"",name:"",stock:"",goods_ids:[],start_time:"",end_time:"",stock_type:"",day:""},product_cate:"",set:0,category_id:1,date:t,date_end:i,time:"12:01",threshold:1,sku:[],show_cate_list:!1,show_mail_list:!1,category_name:"固定时间",category_list:[{category_id:"1",category_name:"固定时间"},{category_id:"2",category_name:"领卷当日开始计算有效期"}],id:0,is_edit:!1,goods:(0,a.default)({banner_imgs:[],goods_name:"",category_id:"",description:"",price:"",vip_price:"",market_price:"",leixin:"1",fx_tc:"",sales:"",stock:"",content:""},"goods_name",""),mail:1,mail_list:[{id:"1",name:"全部商品",value:"0"},{id:"2",name:"指定商品可用"}],peisong:"",group:"未分组"}},components:{uniIcon:n.default,uniPopup:s.default,robbyImageUpload:d.default},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},watch:{},onLoad:function(t){this.id=t.id},onShow:function(){var t=uni.getStorageSync("pro_id_list");console.log(t),this.coupon_form.goods_ids=t,console.log(this.coupon_form.goods_ids),uni.removeStorageSync("pro_id_list")},methods:{DateChange:function(t){this.date=t.detail.value},DateChangeend:function(t){this.dateend=t.detail.value},setting:function(){this.set=1},radioChange:function(t){for(var i=0;i<this.status.length;i++)if(this.status[i].value===t.target.value){this.current=i,console.log(this.status[i].value),this.coupon_form.status=this.status[i].value;break}},getDate:function(t){var i=new Date,o=i.getFullYear(),e=i.getMonth()+1,a=(i.getMonth(),i.getDate());return"start"===t?o-=60:"end"===t&&(o+=2),e=e>9?e:"0"+e,a=a>9?a:"0"+a,"".concat(o,"-").concat(e,"-").concat(a)},getDate_end:function(t){var i=new Date,o=i.getFullYear(),e=i.getMonth()+2,a=i.getDate();return"start"===t?o-=60:"end"===t&&(o+=20),e=e>9?e:"0"+e,a=a>9?a:"0"+a,"".concat(o,"-").concat(e,"-").concat(a)},bindDateChange:function(t){this.date=t.target.value;var i=Date.parse(this.date);this.coupon_form.start_time=i/1e3},bindDateChange_end:function(t){this.date_end=t.target.value;var i=Date.parse(this.date_end);this.coupon_form.end_time=i/1e3,console.log(this.coupon_form.end_time)},switch1Change:function(){1==this.threshold?(this.threshold=0,this.coupon_form.full=0):this.threshold=1},sub:function(){var t=this;console.log(this.coupon_form),this.coupon_form.stock?this.coupon_form.stock_type="1":this.coupon_form.stock_type="0",2==this.category_id?this.$api.http.post("shop_cms/add_shop_coupon",{stock_type:this.coupon_form.stock_type,full:this.coupon_form.full,name:this.coupon_form.name,reduce:this.coupon_form.reduce,status:this.coupon_form.status,goods_ids:this.coupon_form.goods_ids,day:this.coupon_form.day}).then(function(i){t.$api.msg("添加成功"),uni.redirectTo({url:"../couponlist/couponlist"})}):this.$api.http.post("shop_cms/add_shop_coupon",{stock_type:this.coupon_form.stock_type,full:this.coupon_form.full,name:this.coupon_form.name,reduce:this.coupon_form.reduce,status:this.coupon_form.status,goods_ids:this.coupon_form.goods_ids,start_time:this.coupon_form.start_time,end_time:this.coupon_form.end_time}).then(function(i){console.log(t.coupon_form.end_time),t.$api.msg("添加成功"),uni.redirectTo({url:"../couponlist/couponlist"})})},compressImg:function(t){console.log(t)},changeIndicatorDots:function(t){this.isYasuo=!this.isYasuo},cate_change:function(t){var i=t.detail.value;this.category_id=this.category_list[i].category_id,this.category_name=this.category_list[i].category_name,this.show_cate_list=!1},mail_change:function(t){var i=t.detail.value;this.product_cate=this.mail_list[i].name,this.show_mail_list=!1,1==this.mail_list[i].id&&(this.coupon_form.goods_ids=[0]),2==this.mail_list[i].id&&uni.navigateTo({url:"../couponxuan/couponxuan"})},buy:function(t){var i=this;this.$api.http.post("user/pay_vip",{type:t}).then(function(t){i.$api.msg("购买成功"),setTimeout(function(){uni.switchTab({url:"/pages/user/user"})},1500)})}}});i.default=u},2243:function(t,i,o){"use strict";var e,a=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("v-uni-view",{staticClass:"product"},[o("v-uni-view",{staticClass:"top"}),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("店铺优惠券")])],1),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("优惠券名：")]),o("v-uni-input",{attrs:{placeholder:"最多10个字"},model:{value:t.coupon_form.name,callback:function(i){t.$set(t.coupon_form,"name",i)},expression:"coupon_form.name"}})],1),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("面       值：")]),o("v-uni-input",{attrs:{placeholder:"0.01-1000000"},model:{value:t.coupon_form.reduce,callback:function(i){t.$set(t.coupon_form,"reduce",i)},expression:"coupon_form.reduce"}})],1),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("使用次数：")]),o("v-uni-view",{staticClass:"title"},[o("v-uni-radio-group",{staticStyle:{display:"flex","justify-content":"flex-end"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.radioChange.apply(void 0,arguments)}},model:{value:t.coupon_form.status,callback:function(i){t.$set(t.coupon_form,"status",i)},expression:"coupon_form.status"}},t._l(t.status,function(i,e){return o("v-uni-label",{key:i.value,staticClass:"radio"},[o("v-uni-view",{staticClass:"danxuan"},[o("v-uni-radio",{staticClass:"margin-left-sm",attrs:{value:i.value}}),o("span",[t._v(t._s(i.name))])],1)],1)}),1)],1)],1),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("使用门槛：")]),o("v-uni-switch",{class:t.switchA?"checked":"",attrs:{checked:!!t.switchA},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.switch1Change.apply(void 0,arguments)}}})],1),1==t.threshold?o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("发放总量：")]),o("v-uni-input",{attrs:{placeholder:"0.01-1000000"},model:{value:t.coupon_form.full,callback:function(i){t.$set(t.coupon_form,"full",i)},expression:"coupon_form.full"}})],1):t._e(),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("门槛金额：")]),o("v-uni-input",{attrs:{placeholder:"1000000"},model:{value:t.coupon_form.stock,callback:function(i){t.$set(t.coupon_form,"stock",i)},expression:"coupon_form.stock"}})],1),o("v-uni-view",{staticClass:"cu-form-group margin-top",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.show_cate_list=!0}}},[o("v-uni-view",{staticClass:"title"},[t._v("有效期类型：")]),o("v-uni-view",{staticClass:"title",staticStyle:{padding:"0"}},[t._v(t._s(t.category_name)),o("uni-icon",{attrs:{type:"arrowdown",size:"20",color:"#A7A7A7"}})],1)],1),2==t.category_id?o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("有效期天数：")]),o("v-uni-input",{attrs:{placeholder:"请输入有效期天数"},model:{value:t.coupon_form.day,callback:function(i){t.$set(t.coupon_form,"day",i)},expression:"coupon_form.day"}})],1):t._e(),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("开始时间：")]),o("v-uni-picker",{attrs:{mode:"date",value:t.date,start:"2015-09-01",end:"2020-09-01"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.DateChange.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.date))])],1)],1),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("结束时间：")]),o("v-uni-picker",{attrs:{mode:"date",value:t.date_end,start:"2015-09-01",end:"2020-09-01"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.bindDateChange_end.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.date_end))])],1)],1),o("v-uni-view",{staticClass:"cu-form-group",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.show_mail_list=!0}}},[o("v-uni-view",{staticClass:"title"},[t._v("使用设置：")]),o("v-uni-view",{staticClass:"title",staticStyle:{padding:"0"}},[t._v(t._s(t.product_cate)),o("uni-icon",{attrs:{type:"arrowdown",size:"20",color:"#A7A7A7"}})],1)],1),o("v-uni-view",{staticClass:"H50"}),o("v-uni-view",{staticClass:"p_btn"},[o("v-uni-view",{staticClass:" flex flex-direction"},[o("v-uni-button",{staticClass:"cu-btn bg-red margin-tb-sm lg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sub()}}},[t._v("保存")])],1)],1),o("uni-popup",{attrs:{show:t.show_cate_list,type:"top",mode:"fixed"},on:{hidePopup:function(i){arguments[0]=i=t.$handleEvent(i),t.show_cate_list=!1}}},[o("v-uni-view",{staticClass:"uni-list leixin"},[o("v-uni-radio-group",{on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.cate_change.apply(void 0,arguments)}}},t._l(t.category_list,function(i,e){return o("v-uni-label",{key:e,staticClass:"radio"},[o("v-uni-view",{staticClass:"xuan"},[o("v-uni-radio",{attrs:{value:e+""}}),o("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(i.category_name))])],1)],1)}),1)],1)],1),o("uni-popup",{attrs:{show:t.show_mail_list,type:"bottom",mode:"fixed"},on:{hidePopup:function(i){arguments[0]=i=t.$handleEvent(i),t.show_mail_list=!1}}},[o("v-uni-view",{staticClass:"uni-list leixin"},[o("v-uni-radio-group",{on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.mail_change.apply(void 0,arguments)}}},t._l(t.mail_list,function(i,e){return o("v-uni-label",{key:e,staticClass:"uni-list-cell uni-list-cell-pd"},[o("v-uni-view",{staticClass:"xuan"},[o("v-uni-radio",{attrs:{value:e+""}}),o("span",{staticStyle:{"padding-left":"5px"}},[t._v(t._s(i.name))])],1)],1)}),1)],1)],1)],1)},n=[];o.d(i,"b",function(){return a}),o.d(i,"c",function(){return n}),o.d(i,"a",function(){return e})},a14d:function(t,i,o){"use strict";o.r(i);var e=o("2243"),a=o("1bb8");for(var n in a)"default"!==n&&function(t){o.d(i,t,function(){return a[t]})}(n);o("dd7e");var s,d=o("f0c5"),u=Object(d["a"])(a["default"],e["b"],e["c"],!1,null,"6f11948d",null,!1,e["a"],s);i["default"]=u.exports},a66a:function(t,i,o){i=t.exports=o("2350")(!1),i.push([t.i,"uni-page-body[data-v-6f11948d]{background-color:#f7f6fb;font-size:14px}.danxuan[data-v-6f11948d]{width:100px}.danxuan span[data-v-6f11948d]{padding:2px 0 0 10px}.pic[data-v-6f11948d]{padding:%?20?% %?10?%}.input-view[data-v-6f11948d]{font-size:%?28?%}.leixin[data-v-6f11948d]{width:50vw;overflow:hidden;overflow-x:hidden;overflow-y:scroll}.xuan[data-v-6f11948d]{padding-bottom:10px;padding-top:10px}.close-view[data-v-6f11948d]{text-align:center;line-height:14px;height:16px;width:16px;border-radius:50%;background:#ff5053;color:#fff;position:absolute;top:-6px;right:-4px;font-size:12px}.product[data-v-6f11948d]{background-color:#f7f6fb;height:100%}.product .head[data-v-6f11948d]{position:relative;padding:0 5px}.product .head img[data-v-6f11948d]{width:100%;height:150px}.product .btn[data-v-6f11948d]{position:absolute;top:10px;right:5px}.product .btn uni-button[data-v-6f11948d]{font-size:10px;color:red;border:none;border-radius:20px;background-color:#cbcbcb;padding:5px}.product .top[data-v-6f11948d]{box-shadow:0 0 8px 5px #ededed;height:1px;background-color:#ededed}.product .pro_tit[data-v-6f11948d]{padding:15px 10px 10px;border-bottom:1px solid #ededed}.product .BH[data-v-6f11948d]{height:5px;background-color:#f2f2f2}.product .biao[data-v-6f11948d]{background-color:#fff;margin:10px;border-radius:5px;border:1px solid #eaeaea}.product .biao span[data-v-6f11948d]{color:red;padding-right:5px}.product .biao uni-textarea[data-v-6f11948d]{width:100%;border-bottom:1px solid #ededed;padding:10px;height:100px}.product .biao_01[data-v-6f11948d]{padding:10px 10px 10px;border-bottom:1px solid #ededed;display:-webkit-box;display:-webkit-flex;display:flex}.product .biao_01_l[data-v-6f11948d]{padding-top:7px;-webkit-flex-shrink:0;flex-shrink:0}.product .biao_01_1[data-v-6f11948d]{padding-top:5px}.product .biao_01_r[data-v-6f11948d]{-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1}.product .biao_01_r uni-text[data-v-6f11948d]{padding-right:10px}.product .biao_02_r select[data-v-6f11948d]{padding:0 10px;line-height:25px;min-width:80px;text-align:center}.product .biao_01_m[data-v-6f11948d]{border-right:1px solid #ededed}.product .biao_02[data-v-6f11948d]{padding:13px 10px 10px;border-bottom:1px solid #ededed;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.product .biao_03[data-v-6f11948d]{padding:13px 10px 10px;border-bottom:1px solid #ededed;display:-webkit-box;display:-webkit-flex;display:flex}.product .biao_04[data-v-6f11948d]{display:-webkit-box;display:-webkit-flex;display:flex;padding:10px 10px 10px;border-bottom:1px solid #ededed}.product .biao_04_l[data-v-6f11948d]{display:-webkit-box;display:-webkit-flex;display:flex;width:50%;line-height:30px;padding-right:10px}.product .biao_04_l_i[data-v-6f11948d]{-webkit-flex-shrink:1;flex-shrink:1}.product .biao_04_l_1[data-v-6f11948d]{-webkit-flex-shrink:0;flex-shrink:0}.product .biao_05[data-v-6f11948d]{padding:10px 10px 0}.product .jgkc[data-v-6f11948d]{padding:15px 10px;border-bottom:1px solid #ededed}.product .p_btn[data-v-6f11948d]{background:#f7f6fb;padding:0 10px 0;position:fixed;bottom:0;width:100%;z-index:9999}.product .pro_btn[data-v-6f11948d]{background-color:#e5e5e5;padding:10px;text-align:center;border-radius:20px;background-color:#df421d;color:#fff;width:94%}.product .guige[data-v-6f11948d]{border:1px solid #ededed;margin:10px 20px 5px 10px;position:relative}.product .stop[data-v-6f11948d]{position:absolute;right:-15px;top:60px}.product .stop img[data-v-6f11948d]{width:30px;height:30px}.product .uni-input-input[data-v-6f11948d],\n.product .uni-input[data-v-6f11948d]{height:30px;line-height:30px}body.?%PAGE?%[data-v-6f11948d]{background-color:#f7f6fb}",""])},c7e8:function(t,i,o){var e=o("a66a");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=o("4f06").default;a("343fa87b",e,!0,{sourceMap:!1,shadowMode:!1})},dd7e:function(t,i,o){"use strict";var e=o("c7e8"),a=o.n(e);a.a}}]);